# LU·∫¨N VƒÇN T·ªêT NGHI·ªÜP

## X√ÇY D·ª∞NG H·ªÜ TH·ªêNG GI√ÅM S√ÅT V√Ä D·ª∞ B√ÅO CH·∫§T L∆Ø·ª¢NG KH√îNG KH√ç KHU V·ª∞C ASEAN S·ª¨ D·ª§NG MACHINE LEARNING

---

## M·ª§C L·ª§C

- **CH∆Ø∆†NG 1: T·ªîNG QUAN**
  - 1.1. ƒê·∫∑t v·∫•n ƒë·ªÅ
  - 1.2. M·ª•c ti√™u ƒë·ªÅ t√†i
  - 1.3. Ph·∫°m vi v√† gi·ªõi h·∫°n
  - 1.4. Ph∆∞∆°ng ph√°p nghi√™n c·ª©u
  - 1.5. C·∫•u tr√∫c lu·∫≠n vƒÉn

- **CH∆Ø∆†NG 2: C∆† S·ªû L√ù THUY·∫æT**
  - 2.1. Ch·∫•t l∆∞·ª£ng kh√¥ng kh√≠ v√† ch·ªâ s·ªë AQI
  - 2.2. Ph∆∞∆°ng ph√°p n·ªôi suy IDW (Inverse Distance Weighting)
  - 2.3. Machine Learning trong d·ª± b√°o AQI
  - 2.4. C√¥ng ngh·ªá s·ª≠ d·ª•ng

- **CH∆Ø∆†NG 3: PH√ÇN T√çCH V√Ä THI·∫æT K·∫æ H·ªÜ TH·ªêNG**
  - 3.1. Ph√¢n t√≠ch y√™u c·∫ßu
  - 3.2. Ki·∫øn tr√∫c h·ªá th·ªëng
  - 3.3. Thi·∫øt k·∫ø c∆° s·ªü d·ªØ li·ªáu
  - 3.4. Thi·∫øt k·∫ø API
  - 3.5. Thi·∫øt k·∫ø giao di·ªán

- **CH∆Ø∆†NG 4: TRI·ªÇN KHAI V√Ä ƒê√ÅNH GI√Å**
  - 4.1. M√¥i tr∆∞·ªùng tri·ªÉn khai
  - 4.2. Tri·ªÉn khai Backend
  - 4.3. Tri·ªÉn khai Frontend
  - 4.4. K·∫øt qu·∫£ ƒë·∫°t ƒë∆∞·ª£c
  - 4.5. ƒê√°nh gi√° v√† th·ª≠ nghi·ªám

- **CH∆Ø∆†NG 5: K·∫æT LU·∫¨N V√Ä H∆Ø·ªöNG PH√ÅT TRI·ªÇN**
  - 5.1. K·∫øt lu·∫≠n
  - 5.2. H·∫°n ch·∫ø
  - 5.3. H∆∞·ªõng ph√°t tri·ªÉn

---

# CH∆Ø∆†NG 1: T·ªîNG QUAN

## 1.1. ƒê·∫∑t v·∫•n ƒë·ªÅ

√î nhi·ªÖm kh√¥ng kh√≠ ƒëang tr·ªü th√†nh m·ªôt trong nh·ªØng th√°ch th·ª©c m√¥i tr∆∞·ªùng nghi√™m tr·ªçng nh·∫•t t·∫°i khu v·ª±c ƒê√¥ng Nam √Å (ASEAN). Theo b√°o c√°o c·ªßa T·ªï ch·ª©c Y t·∫ø Th·∫ø gi·ªõi (WHO), √¥ nhi·ªÖm kh√¥ng kh√≠ g√¢y ra kho·∫£ng 7 tri·ªáu ca t·ª≠ vong s·ªõm m·ªói nƒÉm tr√™n to√†n c·∫ßu, trong ƒë√≥ khu v·ª±c ch√¢u √Å - Th√°i B√¨nh D∆∞∆°ng ch·ªãu ·∫£nh h∆∞·ªüng n·∫∑ng n·ªÅ nh·∫•t.

T·∫°i c√°c th√†nh ph·ªë l·ªõn nh∆∞ H√† N·ªôi, Bangkok, Jakarta hay Manila, ch·ªâ s·ªë ch·∫•t l∆∞·ª£ng kh√¥ng kh√≠ (AQI) th∆∞·ªùng xuy√™n v∆∞·ª£t ng∆∞·ª°ng an to√†n, ƒë·∫∑c bi·ªát trong m√πa kh√¥ v√† c√°c th·ªùi ƒëi·ªÉm ƒë·ªët r∆°m r·∫°. ƒêi·ªÅu n√†y ƒë·∫∑t ra nhu c·∫ßu c·∫•p thi·∫øt v·ªÅ m·ªôt h·ªá th·ªëng gi√°m s√°t v√† c·∫£nh b√°o ch·∫•t l∆∞·ª£ng kh√¥ng kh√≠ theo th·ªùi gian th·ª±c, gi√∫p ng∆∞·ªùi d√¢n c√≥ th·ªÉ theo d√µi v√† ƒë∆∞a ra c√°c bi·ªán ph√°p b·∫£o v·ªá s·ª©c kh·ªèe ph√π h·ª£p.

Hi·ªán t·∫°i, d·ªØ li·ªáu v·ªÅ ch·∫•t l∆∞·ª£ng kh√¥ng kh√≠ ƒë√£ ƒë∆∞·ª£c thu th·∫≠p b·ªüi c√°c tr·∫°m quan tr·∫Øc thu·ªôc m·∫°ng l∆∞·ªõi WAQI (World Air Quality Index). Tuy nhi√™n, vi·ªác truy c·∫≠p v√† ph√¢n t√≠ch d·ªØ li·ªáu n√†y c√≤n ph√¢n t√°n, ch∆∞a c√≥ h·ªá th·ªëng t√≠ch h·ª£p cho ph√©p ng∆∞·ªùi d√πng:
- Theo d√µi AQI theo th·ªùi gian th·ª±c tr√™n b·∫£n ƒë·ªì
- D·ª± b√°o xu h∆∞·ªõng AQI trong c√°c khung gi·ªù ti·∫øp theo
- ∆Ø·ªõc t√≠nh AQI t·∫°i v·ªã tr√≠ b·∫•t k·ª≥ (kh√¥ng ch·ªâ t·∫°i c√°c tr·∫°m quan tr·∫Øc)
- Nh·∫≠n c·∫£nh b√°o khi AQI v∆∞·ª£t ng∆∞·ª°ng an to√†n

## 1.2. M·ª•c ti√™u ƒë·ªÅ t√†i

ƒê·ªÅ t√†i h∆∞·ªõng t·ªõi x√¢y d·ª±ng m·ªôt h·ªá th·ªëng web ho√†n ch·ªânh v·ªõi c√°c m·ª•c ti√™u:

**M·ª•c ti√™u ch√≠nh:**
- X√¢y d·ª±ng h·ªá th·ªëng gi√°m s√°t ch·∫•t l∆∞·ª£ng kh√¥ng kh√≠ th·ªùi gian th·ª±c khu v·ª±c ASEAN
- Ph√°t tri·ªÉn module d·ª± b√°o AQI s·ª≠ d·ª•ng Machine Learning
- Tri·ªÉn khai ph∆∞∆°ng ph√°p n·ªôi suy IDW ƒë·ªÉ ∆∞·ªõc t√≠nh AQI t·∫°i b·∫•t k·ª≥ v·ªã tr√≠ n√†o

**M·ª•c ti√™u c·ª• th·ªÉ:**
1. Thu th·∫≠p v√† t√≠ch h·ª£p d·ªØ li·ªáu t·ª´ 400+ tr·∫°m quan tr·∫Øc khu v·ª±c ASEAN
2. Hi·ªÉn th·ªã d·ªØ li·ªáu AQI tr·ª±c quan tr√™n b·∫£n ƒë·ªì t∆∞∆°ng t√°c
3. X√¢y d·ª±ng m√¥ h√¨nh Machine Learning d·ª± b√°o AQI (1h, 6h, 12h, 24h)
4. Ph√°t tri·ªÉn ch·ª©c nƒÉng tra c·ª©u AQI theo v·ªã tr√≠ ng∆∞·ªùi d√πng
5. X√¢y d·ª±ng h·ªá th·ªëng ƒëƒÉng k√Ω/ƒëƒÉng nh·∫≠p v√† qu·∫£n l√Ω c·∫£nh b√°o

## 1.3. Ph·∫°m vi v√† gi·ªõi h·∫°n

**Ph·∫°m vi:**
- Khu v·ª±c ƒë·ªãa l√Ω: 10 qu·ªëc gia ASEAN (Vi·ªát Nam, Th√°i Lan, Indonesia, Philippines, Malaysia, Singapore, Myanmar, Campuchia, L√†o, Brunei)
- Ngu·ªìn d·ªØ li·ªáu: API c·ªßa World Air Quality Index (WAQI)
- ƒê·ªëi t∆∞·ª£ng s·ª≠ d·ª•ng: Ng∆∞·ªùi d√¢n c·∫ßn theo d√µi ch·∫•t l∆∞·ª£ng kh√¥ng kh√≠

**Gi·ªõi h·∫°n:**
- Ch·ªâ hi·ªÉn th·ªã ch·ªâ s·ªë AQI t·ªïng h·ª£p, kh√¥ng ph√¢n t√≠ch t·ª´ng th√†nh ph·∫ßn (PM2.5, PM10, O3, NO2, SO2, CO)
- D·ª± b√°o d·ª±a tr√™n d·ªØ li·ªáu l·ªãch s·ª≠ t·∫°i m·ªói tr·∫°m, ch∆∞a t√≠ch h·ª£p d·ªØ li·ªáu th·ªùi ti·∫øt
- Ph·ª• thu·ªôc v√†o t√≠nh s·∫µn c√≥ c·ªßa API WAQI

## 1.4. Ph∆∞∆°ng ph√°p nghi√™n c·ª©u

1. **Thu th·∫≠p v√† x·ª≠ l√Ω d·ªØ li·ªáu:** Thu th·∫≠p d·ªØ li·ªáu AQI t·ª´ API WAQI, l∆∞u tr·ªØ v√†o c∆° s·ªü d·ªØ li·ªáu SQLite
2. **Ph√¢n t√≠ch v√† thi·∫øt k·∫ø:** √Åp d·ª•ng quy tr√¨nh ph√°t tri·ªÉn ph·∫ßn m·ªÅm Agile
3. **X√¢y d·ª±ng m√¥ h√¨nh ML:** S·ª≠ d·ª•ng Gradient Boosting Regressor v·ªõi c√°c ƒë·∫∑c tr∆∞ng th·ªùi gian
4. **Tri·ªÉn khai h·ªá th·ªëng:** √Åp d·ª•ng ki·∫øn tr√∫c RESTful API v·ªõi FastAPI v√† Single-Page Application

## 1.5. C·∫•u tr√∫c lu·∫≠n vƒÉn

Lu·∫≠n vƒÉn ƒë∆∞·ª£c c·∫•u tr√∫c th√†nh 5 ch∆∞∆°ng:
- **Ch∆∞∆°ng 1:** T·ªïng quan v·ªÅ ƒë·ªÅ t√†i, m·ª•c ti√™u v√† ph·∫°m vi
- **Ch∆∞∆°ng 2:** C∆° s·ªü l√Ω thuy·∫øt v·ªÅ AQI, IDW v√† Machine Learning
- **Ch∆∞∆°ng 3:** Ph√¢n t√≠ch y√™u c·∫ßu v√† thi·∫øt k·∫ø h·ªá th·ªëng
- **Ch∆∞∆°ng 4:** Tri·ªÉn khai v√† ƒë√°nh gi√° k·∫øt qu·∫£
- **Ch∆∞∆°ng 5:** K·∫øt lu·∫≠n v√† h∆∞·ªõng ph√°t tri·ªÉn

## 1.6. ƒê√≥ng g√≥p c·ªßa ƒë·ªÅ t√†i

ƒê·ªÅ t√†i ƒë√≥ng g√≥p c√°c n·ªôi dung m·ªõi sau ƒë√¢y:

1. **X√¢y d·ª±ng b·ªô d·ªØ li·ªáu chu·∫©n h√≥a AQI khu v·ª±c ASEAN:**
   - T√≠ch h·ª£p v√† chu·∫©n h√≥a d·ªØ li·ªáu t·ª´ 400+ tr·∫°m quan tr·∫Øc thu·ªôc 10 qu·ªëc gia
   - Thi·∫øt k·∫ø pipeline t·ª± ƒë·ªông thu th·∫≠p v√† l∆∞u tr·ªØ d·ªØ li·ªáu theo th·ªùi gian th·ª±c

2. **ƒê·ªÅ xu·∫•t quy tr√¨nh t√≠ch h·ª£p IDW v√†o Web GIS th·ªùi gian th·ª±c:**
   - Tri·ªÉn khai thu·∫≠t to√°n IDW v·ªõi c∆° ch·∫ø confidence indicator
   - X·ª≠ l√Ω edge case cho c√°c v√πng kh√¥ng c√≥ tr·∫°m quan tr·∫Øc g·∫ßn

3. **So s√°nh v√† ƒë√°nh gi√° c√°c thu·∫≠t to√°n ML cho d·ª± b√°o AQI:**
   - So s√°nh hi·ªáu nƒÉng Linear Regression, Random Forest, Gradient Boosting
   - ƒê·ªÅ xu·∫•t Gradient Boosting l√† l·ª±a ch·ªçn ph√π h·ª£p cho tri·ªÉn khai web nh·∫π

4. **Ki·∫øn tr√∫c hybrid t√≠ch h·ª£p d·ªØ li·ªáu m·∫∑t ƒë·∫•t v√† v·ªá tinh:**
   - Thi·∫øt k·∫ø h·ªá th·ªëng fallback sang d·ªØ li·ªáu v·ªá tinh (OpenWeatherMap) khi tr·∫°m m·∫∑t ƒë·∫•t xa
   - Cung c·∫•p confidence level gi√∫p ng∆∞·ªùi d√πng hi·ªÉu ƒë·ªô tin c·∫≠y d·ªØ li·ªáu

---

# CH∆Ø∆†NG 2: C∆† S·ªû L√ù THUY·∫æT

## 2.1. Ch·∫•t l∆∞·ª£ng kh√¥ng kh√≠ v√† ch·ªâ s·ªë AQI

### 2.1.1. Kh√°i ni·ªám ch·∫•t l∆∞·ª£ng kh√¥ng kh√≠

Ch·∫•t l∆∞·ª£ng kh√¥ng kh√≠ ƒë∆∞·ª£c ƒë√°nh gi√° th√¥ng qua n·ªìng ƒë·ªô c·ªßa c√°c ch·∫•t √¥ nhi·ªÖm trong kh√¥ng kh√≠, bao g·ªìm:
- **PM2.5:** B·ª•i m·ªãn c√≥ ƒë∆∞·ªùng k√≠nh d∆∞·ªõi 2.5 micromet
- **PM10:** B·ª•i c√≥ ƒë∆∞·ªùng k√≠nh d∆∞·ªõi 10 micromet
- **O3:** Ozone t·∫ßng m·∫∑t ƒë·∫•t
- **NO2:** Nitrogen dioxide
- **SO2:** Sulfur dioxide
- **CO:** Carbon monoxide

### 2.1.2. Ch·ªâ s·ªë ch·∫•t l∆∞·ª£ng kh√¥ng kh√≠ (AQI)

AQI (Air Quality Index) l√† ch·ªâ s·ªë ti√™u chu·∫©n h√≥a ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ b√°o c√°o ch·∫•t l∆∞·ª£ng kh√¥ng kh√≠ h√†ng ng√†y. AQI ƒë∆∞·ª£c chia th√†nh 6 m·ª©c:

| M·ª©c AQI | M√¥ t·∫£ | ·∫¢nh h∆∞·ªüng s·ª©c kh·ªèe |
|---------|-------|-------------------|
| 0-50 | T·ªët | Kh√¥ng ·∫£nh h∆∞·ªüng |
| 51-100 | Trung b√¨nh | Nh·∫°y c·∫£m v·ªõi nh√≥m nguy c∆° cao |
| 101-150 | K√©m | ·∫¢nh h∆∞·ªüng nh√≥m nh·∫°y c·∫£m |
| 151-200 | X·∫•u | ·∫¢nh h∆∞·ªüng m·ªçi ng∆∞·ªùi |
| 201-300 | R·∫•t x·∫•u | C·∫£nh b√°o s·ª©c kh·ªèe |
| 301+ | Nguy hi·ªÉm | Kh·∫©n c·∫•p s·ª©c kh·ªèe |

### 2.1.3. C√¥ng th·ª©c t√≠nh AQI

AQI ƒë∆∞·ª£c t√≠nh t·ª´ n·ªìng ƒë·ªô c√°c ch·∫•t √¥ nhi·ªÖm theo c√¥ng th·ª©c:

$$AQI_p = \frac{I_{Hi} - I_{Lo}}{BP_{Hi} - BP_{Lo}} \times (C_p - BP_{Lo}) + I_{Lo}$$

Trong ƒë√≥:
- $AQI_p$: Ch·ªâ s·ªë AQI c·ªßa ch·∫•t √¥ nhi·ªÖm p
- $C_p$: N·ªìng ƒë·ªô ch·∫•t √¥ nhi·ªÖm p
- $BP_{Hi}$, $BP_{Lo}$: Gi·ªõi h·∫°n n·ªìng ƒë·ªô cao/th·∫•p
- $I_{Hi}$, $I_{Lo}$: Gi·ªõi h·∫°n AQI t∆∞∆°ng ·ª©ng

## 2.2. Ph∆∞∆°ng ph√°p n·ªôi suy IDW (Inverse Distance Weighting)

### 2.2.1. Kh√°i ni·ªám

IDW l√† ph∆∞∆°ng ph√°p n·ªôi suy kh√¥ng gian ƒë∆∞·ª£c s·ª≠ d·ª•ng r·ªông r√£i trong GIS ƒë·ªÉ ∆∞·ªõc t√≠nh gi√° tr·ªã t·∫°i c√°c ƒëi·ªÉm kh√¥ng c√≥ d·ªØ li·ªáu d·ª±a tr√™n c√°c ƒëi·ªÉm ƒë√£ bi·∫øt xung quanh.

### 2.2.2. C√¥ng th·ª©c IDW

$$\hat{Z}(x_0) = \frac{\sum_{i=1}^{n} w_i \cdot Z(x_i)}{\sum_{i=1}^{n} w_i}$$

V·ªõi tr·ªçng s·ªë:
$$w_i = \frac{1}{d_i^p}$$

Trong ƒë√≥:
- $\hat{Z}(x_0)$: Gi√° tr·ªã ∆∞·ªõc t√≠nh t·∫°i ƒëi·ªÉm c·∫ßn t√≠nh
- $Z(x_i)$: Gi√° tr·ªã ƒë√£ bi·∫øt t·∫°i ƒëi·ªÉm i
- $d_i$: Kho·∫£ng c√°ch t·ª´ ƒëi·ªÉm i ƒë·∫øn ƒëi·ªÉm c·∫ßn t√≠nh
- $p$: L≈©y th·ª´a kho·∫£ng c√°ch (th∆∞·ªùng d√πng p=2)

### 2.2.3. ·ª®ng d·ª•ng trong h·ªá th·ªëng

Trong h·ªá th·ªëng AirWatch, IDW ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ:
- ∆Ø·ªõc t√≠nh AQI t·∫°i b·∫•t k·ª≥ v·ªã tr√≠ n√†o d·ª±a tr√™n c√°c tr·∫°m quan tr·∫Øc xung quanh
- N·ªôi suy d·ª± b√°o AQI cho c√°c v·ªã tr√≠ kh√¥ng c√≥ tr·∫°m

## 2.3. Machine Learning trong d·ª± b√°o AQI

### 2.3.1. T·ªïng quan

Machine Learning ƒë∆∞·ª£c ·ª©ng d·ª•ng ƒë·ªÉ d·ª± b√°o xu h∆∞·ªõng AQI trong t∆∞∆°ng lai d·ª±a tr√™n:
- D·ªØ li·ªáu AQI l·ªãch s·ª≠
- ƒê·∫∑c tr∆∞ng th·ªùi gian (gi·ªù, ng√†y trong tu·∫ßn, cu·ªëi tu·∫ßn)
- Xu h∆∞·ªõng bi·∫øn ƒë·ªïi (lag features)

### 2.3.2. Gradient Boosting Regressor

H·ªá th·ªëng s·ª≠ d·ª•ng thu·∫≠t to√°n Gradient Boosting Regressor v·ªõi c√°c tham s·ªë:
- `n_estimators`: 50 c√¢y quy·∫øt ƒë·ªãnh
- `max_depth`: 3 (ƒë·ªô s√¢u t·ªëi ƒëa)
- `learning_rate`: 0.1

### 2.3.3. Feature Engineering

C√°c ƒë·∫∑c tr∆∞ng ƒë∆∞·ª£c tr√≠ch xu·∫•t:
```python
features = ['hour', 'day_of_week', 'is_weekend', 'lag_1', 'lag_3']
```

- `hour`: Gi·ªù trong ng√†y (0-23)
- `day_of_week`: Ng√†y trong tu·∫ßn (0-6)
- `is_weekend`: C√≥ ph·∫£i cu·ªëi tu·∫ßn kh√¥ng (0/1)
- `lag_1`: Gi√° tr·ªã AQI c·ªßa 1 gi·ªù tr∆∞·ªõc
- `lag_3`: Gi√° tr·ªã AQI c·ªßa 3 gi·ªù tr∆∞·ªõc

## 2.4. C√°c nghi√™n c·ª©u li√™n quan (Related Works)

### 2.4.1. T·ªïng quan nghi√™n c·ª©u d·ª± b√°o AQI

D·ª± b√°o ch·∫•t l∆∞·ª£ng kh√¥ng kh√≠ l√† lƒ©nh v·ª±c nghi√™n c·ª©u s√¥i ƒë·ªông v·ªõi nhi·ªÅu h∆∞·ªõng ti·∫øp c·∫≠n kh√°c nhau:

| T√°c gi·∫£ & NƒÉm | Ph∆∞∆°ng ph√°p | ∆Øu ƒëi·ªÉm | H·∫°n ch·∫ø |
|---------------|-------------|---------|---------|
| Zheng et al. (2013) | Deep Learning (LSTM) | ƒê·ªô ch√≠nh x√°c cao v·ªõi chu·ªói th·ªùi gian d√†i | Y√™u c·∫ßu GPU, kh√≥ tri·ªÉn khai web |
| Liu et al. (2019) | CNN-LSTM Hybrid | B·∫Øt ƒë∆∞·ª£c pattern kh√¥ng gian-th·ªùi gian | T√≠nh to√°n ph·ª©c t·∫°p, ch·∫≠m |
| Qi et al. (2018) | Random Forest | ·ªîn ƒë·ªãnh, √≠t overfitting | Kh√¥ng t·ªëi ∆∞u cho time-series |
| Chen et al. (2020) | Gradient Boosting | Nhanh, hi·ªáu qu·∫£, d·ªÖ tri·ªÉn khai | C·∫ßn tuning hyperparameters |
| Kumar et al. (2021) | Transformer | State-of-the-art accuracy | R·∫•t n·∫∑ng, kh√¥ng ph√π h·ª£p web |

### 2.4.2. So s√°nh v√† ƒë·ªãnh v·ªã nghi√™n c·ª©u

**Nghi√™n c·ª©u tr∆∞·ªõc ƒë√≥:**
- Zheng et al. (2013) s·ª≠ d·ª•ng LSTM v·ªõi accuracy 92% nh∆∞ng y√™u c·∫ßu 50GB RAM v√† GPU m·∫°nh
- Liu et al. (2019) k·∫øt h·ª£p CNN-LSTM cho d·ª± b√°o ƒëa tr·∫°m nh∆∞ng inference time > 10 gi√¢y

**ƒê·ªÅ t√†i c·ªßa ch√∫ng t√¥i:**
- ∆Øu ti√™n **kh·∫£ nƒÉng tri·ªÉn khai th·ª±c t·∫ø** tr√™n web server nh·∫π (512MB RAM)
- S·ª≠ d·ª•ng **Gradient Boosting** ƒë·∫°t ƒë∆∞·ª£c c√¢n b·∫±ng gi·ªØa accuracy v√† t·ªëc ƒë·ªô
- Inference time < 100ms, ph√π h·ª£p real-time web application

### 2.4.3. ƒê√≥ng g√≥p so v·ªõi nghi√™n c·ª©u hi·ªán c√≥

| Ti√™u ch√≠ | Nghi√™n c·ª©u tr∆∞·ªõc | ƒê·ªÅ t√†i n√†y |
|----------|------------------|------------|
| Ph·∫°m vi | ƒê∆°n qu·ªëc gia | 10 n∆∞·ªõc ASEAN |
| Model | LSTM ph·ª©c t·∫°p | Gradient Boosting nh·∫π |
| Deployment | Research only | Production-ready web |
| Interpolation | Kriging (ch·∫≠m) | IDW (nhanh, parallel) |
| Fallback | Kh√¥ng c√≥ | Satellite data integration |

## 2.5. C√¥ng ngh·ªá s·ª≠ d·ª•ng

### 2.4.1. Backend

| C√¥ng ngh·ªá | Phi√™n b·∫£n | M·ª•c ƒë√≠ch |
|-----------|-----------|----------|
| Python | 3.10+ | Ng√¥n ng·ªØ l·∫≠p tr√¨nh ch√≠nh |
| FastAPI | 0.104 | Framework API hi·ªáu nƒÉng cao |
| SQLAlchemy | 2.0 | ORM cho database |
| SQLite | 3.x | C∆° s·ªü d·ªØ li·ªáu |
| Scikit-learn | 1.3 | Machine Learning |
| Pandas | 2.1 | X·ª≠ l√Ω d·ªØ li·ªáu |

### 2.4.2. Frontend

| C√¥ng ngh·ªá | Phi√™n b·∫£n | M·ª•c ƒë√≠ch |
|-----------|-----------|----------|
| HTML5/CSS3/JS | - | Giao di·ªán web |
| Leaflet.js | 1.9 | B·∫£n ƒë·ªì t∆∞∆°ng t√°c |
| Chart.js | 4.x | Bi·ªÉu ƒë·ªì |
| Font Awesome | 6.5 | Icons |

### 2.4.3. Ki·∫øn tr√∫c t·ªïng quan

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Client    ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   FastAPI   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   SQLite    ‚îÇ
‚îÇ  (Browser)  ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ   Server    ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ  Database   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚îÇ
                           ‚ñº
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ  WAQI API   ‚îÇ
                    ‚îÇ  (External) ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

*(Ti·∫øp t·ª•c Ch∆∞∆°ng 3, 4, 5...)*

---

# CH∆Ø∆†NG 3: PH√ÇN T√çCH V√Ä THI·∫æT K·∫æ H·ªÜ TH·ªêNG

## 3.1. Ph√¢n t√≠ch y√™u c·∫ßu

### 3.1.1. Y√™u c·∫ßu ch·ª©c nƒÉng

| STT | Y√™u c·∫ßu | M√¥ t·∫£ |
|-----|---------|-------|
| UC01 | Xem b·∫£n ƒë·ªì AQI | Hi·ªÉn th·ªã c√°c tr·∫°m quan tr·∫Øc v·ªõi m√£ m√†u AQI tr√™n b·∫£n ƒë·ªì |
| UC02 | Xem chi ti·∫øt tr·∫°m | Click v√†o tr·∫°m ƒë·ªÉ xem AQI, bi·ªÉu ƒë·ªì 24h, d·ª± b√°o |
| UC03 | T√¨m ki·∫øm ƒë·ªãa ƒëi·ªÉm | Nh·∫≠p t√™n th√†nh ph·ªë/ƒë·ªãa ƒëi·ªÉm ƒë·ªÉ tra c·ª©u AQI |
| UC04 | ƒê·ªãnh v·ªã ng∆∞·ªùi d√πng | S·ª≠ d·ª•ng GPS ƒë·ªÉ x√°c ƒë·ªãnh v·ªã tr√≠ v√† hi·ªÉn th·ªã AQI |
| UC05 | D·ª± b√°o AQI | Hi·ªÉn th·ªã d·ª± b√°o AQI 1h, 6h, 12h, 24h |
| UC06 | ƒêƒÉng k√Ω/ƒêƒÉng nh·∫≠p | T·∫°o t√†i kho·∫£n v√† x√°c th·ª±c ng∆∞·ªùi d√πng |
| UC07 | L∆∞u v·ªã tr√≠ y√™u th√≠ch | L∆∞u v√† qu·∫£n l√Ω c√°c v·ªã tr√≠ quan t√¢m |
| UC08 | ƒê·∫∑t c·∫£nh b√°o AQI | T·∫°o c·∫£nh b√°o khi AQI v∆∞·ª£t ng∆∞·ª°ng |
| UC09 | X·∫øp h·∫°ng √¥ nhi·ªÖm | Hi·ªÉn th·ªã top 10 tr·∫°m √¥ nhi·ªÖm nh·∫•t |
| UC10 | Chuy·ªÉn ƒë·ªïi giao di·ªán | Light/Dark mode, ·∫©n/hi·ªán panels |

### 3.1.2. Y√™u c·∫ßu phi ch·ª©c nƒÉng

| Y√™u c·∫ßu | M√¥ t·∫£ |
|---------|-------|
| Hi·ªáu nƒÉng | T·∫£i trang d∆∞·ªõi 3 gi√¢y, c·∫≠p nh·∫≠t d·ªØ li·ªáu m·ªói ph√∫t |
| Kh·∫£ d·ª•ng | H·ªá th·ªëng ho·∫°t ƒë·ªông 24/7 |
| B·∫£o m·∫≠t | M√£ h√≥a m·∫≠t kh·∫©u, JWT authentication |
| Responsive | T∆∞∆°ng th√≠ch desktop v√† mobile |
| PWA | C√≥ th·ªÉ c√†i ƒë·∫∑t nh∆∞ ·ª©ng d·ª•ng native |

### 3.1.3. Bi·ªÉu ƒë·ªì Use Case

```
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ         AirWatch ASEAN              ‚îÇ
                    ‚îÇ                                     ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
    ‚îÇ       ‚îÇ       ‚îÇ  ‚îÇ UC01: Xem b·∫£n ƒë·ªì AQI       ‚îÇ    ‚îÇ
    ‚îÇ       ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
    ‚îÇ       ‚îÇ       ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
    ‚îÇ       ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  ‚îÇ UC02: Xem chi ti·∫øt tr·∫°m    ‚îÇ    ‚îÇ
    ‚îÇ       ‚îÇ       ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
    ‚îÇ Kh√°ch ‚îÇ       ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
    ‚îÇ       ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  ‚îÇ UC03: T√¨m ki·∫øm ƒë·ªãa ƒëi·ªÉm    ‚îÇ    ‚îÇ
    ‚îÇ       ‚îÇ       ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
    ‚îÇ       ‚îÇ       ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
    ‚îÇ       ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  ‚îÇ UC04: ƒê·ªãnh v·ªã v·ªã tr√≠       ‚îÇ    ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
                    ‚îÇ                                     ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
    ‚îÇ       ‚îÇ       ‚îÇ  ‚îÇ UC06: ƒêƒÉng k√Ω/ƒêƒÉng nh·∫≠p    ‚îÇ    ‚îÇ
    ‚îÇ       ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
    ‚îÇ Th√†nh ‚îÇ       ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
    ‚îÇ vi√™n  ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  ‚îÇ UC07: L∆∞u v·ªã tr√≠ y√™u th√≠ch ‚îÇ    ‚îÇ
    ‚îÇ       ‚îÇ       ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
    ‚îÇ       ‚îÇ       ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
    ‚îÇ       ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  ‚îÇ UC08: ƒê·∫∑t c·∫£nh b√°o AQI     ‚îÇ    ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
                    ‚îÇ                                     ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## 3.2. Ki·∫øn tr√∫c h·ªá th·ªëng

### 3.2.1. Ki·∫øn tr√∫c t·ªïng quan

H·ªá th·ªëng ƒë∆∞·ª£c thi·∫øt k·∫ø theo m√¥ h√¨nh **3-tier architecture**:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    PRESENTATION LAYER                        ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ                  Single Page App                     ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ Leaflet  ‚îÇ ‚îÇ Chart.js ‚îÇ ‚îÇ Auth UI  ‚îÇ ‚îÇ Panels ‚îÇ  ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ   Map    ‚îÇ ‚îÇ  Charts  ‚îÇ ‚îÇ  Modals  ‚îÇ ‚îÇ  Menu  ‚îÇ  ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚îÇ
                              ‚ñº RESTful API
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    APPLICATION LAYER                         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ                    FastAPI Server                    ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ Stations ‚îÇ ‚îÇ Predict  ‚îÇ ‚îÇ   Auth   ‚îÇ ‚îÇ  User  ‚îÇ  ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ   API    ‚îÇ ‚îÇ   API    ‚îÇ ‚îÇ   API    ‚îÇ ‚îÇ  API   ‚îÇ  ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ                                                      ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê             ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ Crawler  ‚îÇ ‚îÇ ML Model ‚îÇ ‚îÇ   JWT    ‚îÇ             ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ(Scheduler)‚îÇ ‚îÇ(Gradient)‚îÇ ‚îÇ  Auth    ‚îÇ             ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò             ‚îÇ    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚îÇ
                              ‚ñº SQL
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      DATA LAYER                              ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê             ‚îÇ
‚îÇ  ‚îÇ air_quality_asean  ‚îÇ  ‚îÇ  airwatch_users    ‚îÇ             ‚îÇ
‚îÇ  ‚îÇ      .db           ‚îÇ  ‚îÇ       .db          ‚îÇ             ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ             ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ   readings   ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ    users     ‚îÇ  ‚îÇ             ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§  ‚îÇ             ‚îÇ
‚îÇ  ‚îÇ                    ‚îÇ  ‚îÇ  ‚îÇ  favorites   ‚îÇ  ‚îÇ             ‚îÇ
‚îÇ  ‚îÇ                    ‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§  ‚îÇ             ‚îÇ
‚îÇ  ‚îÇ                    ‚îÇ  ‚îÇ  ‚îÇ   alerts     ‚îÇ  ‚îÇ             ‚îÇ
‚îÇ  ‚îÇ                    ‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ             ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚îÇ
                              ‚ñº HTTP
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    EXTERNAL SERVICES                         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê             ‚îÇ
‚îÇ  ‚îÇ     WAQI API       ‚îÇ  ‚îÇ  Nominatim OSM     ‚îÇ             ‚îÇ
‚îÇ  ‚îÇ  (Air Quality)     ‚îÇ  ‚îÇ   (Geocoding)      ‚îÇ             ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 3.2.2. Lu·ªìng d·ªØ li·ªáu

**Lu·ªìng 1: C·∫≠p nh·∫≠t d·ªØ li·ªáu AQI**
```
WAQI API ‚îÄ‚îÄ‚ñ∂ Crawler ‚îÄ‚îÄ‚ñ∂ Database ‚îÄ‚îÄ‚ñ∂ API ‚îÄ‚îÄ‚ñ∂ Frontend
   ‚îÇ                        ‚îÇ
   ‚îî‚îÄ‚îÄ M·ªói 5 ph√∫t ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Lu·ªìng 2: D·ª± b√°o AQI**
```
Database ‚îÄ‚îÄ‚ñ∂ Feature Engineering ‚îÄ‚îÄ‚ñ∂ ML Model ‚îÄ‚îÄ‚ñ∂ Predictions ‚îÄ‚îÄ‚ñ∂ API
   ‚îÇ              ‚îÇ                     ‚îÇ
   ‚îî‚îÄ‚îÄ 15+ records ‚îÄ‚îÄ‚îÄ Gradient ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       Boosting
```

**Lu·ªìng 3: IDW Interpolation**
```
User Location ‚îÄ‚îÄ‚ñ∂ Fetch Nearby Stations ‚îÄ‚îÄ‚ñ∂ IDW Calculate ‚îÄ‚îÄ‚ñ∂ Display
      ‚îÇ                   ‚îÇ                       ‚îÇ
      ‚îî‚îÄ‚îÄ lat, lng ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ weighted average ‚îÄ‚îÄ‚îÄ‚îò
```

## 3.3. Thi·∫øt k·∫ø c∆° s·ªü d·ªØ li·ªáu

### 3.3.1. ERD (Entity Relationship Diagram)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ     USERS       ‚îÇ          ‚îÇ    READINGS     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§          ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ id (PK)         ‚îÇ          ‚îÇ id (PK)         ‚îÇ
‚îÇ email           ‚îÇ          ‚îÇ uid             ‚îÇ
‚îÇ password_hash   ‚îÇ          ‚îÇ name            ‚îÇ
‚îÇ name            ‚îÇ          ‚îÇ lat             ‚îÇ
‚îÇ created_at      ‚îÇ          ‚îÇ lng             ‚îÇ
‚îÇ is_active       ‚îÇ          ‚îÇ aqi             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ timestamp       ‚îÇ
         ‚îÇ                   ‚îÇ country         ‚îÇ
         ‚îÇ 1:N               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   FAVORITES     ‚îÇ          ‚îÇ     ALERTS      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§          ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ id (PK)         ‚îÇ          ‚îÇ id (PK)         ‚îÇ
‚îÇ user_id (FK)    ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ user_id (FK)    ‚îÇ
‚îÇ name            ‚îÇ   N:1    ‚îÇ name            ‚îÇ
‚îÇ lat             ‚îÇ          ‚îÇ lat             ‚îÇ
‚îÇ lng             ‚îÇ          ‚îÇ lng             ‚îÇ
‚îÇ created_at      ‚îÇ          ‚îÇ threshold       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ is_active       ‚îÇ
                             ‚îÇ created_at      ‚îÇ
                             ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 3.3.2. Chi ti·∫øt b·∫£ng

**B·∫£ng USERS:**
```sql
CREATE TABLE users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    email VARCHAR(255) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    name VARCHAR(100),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    is_active BOOLEAN DEFAULT TRUE
);
```

**B·∫£ng FAVORITES:**
```sql
CREATE TABLE favorite_locations (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    name VARCHAR(255) NOT NULL,
    lat FLOAT NOT NULL,
    lng FLOAT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id)
);
```

**B·∫£ng ALERTS:**
```sql
CREATE TABLE alert_settings (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    name VARCHAR(255) NOT NULL,
    lat FLOAT NOT NULL,
    lng FLOAT NOT NULL,
    threshold INTEGER DEFAULT 100,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id)
);
```

## 3.4. Quy tr√¨nh ETL v√† X·ª≠ l√Ω d·ªØ li·ªáu

### 3.4.1. Pipeline thu th·∫≠p d·ªØ li·ªáu

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  WAQI API   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   Extract    ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   Transform   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ     Load     ‚îÇ
‚îÇ  (Source)   ‚îÇ     ‚îÇ  (HTTP GET)  ‚îÇ     ‚îÇ  (Validate)   ‚îÇ     ‚îÇ  (SQLite)    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ                   ‚îÇ                    ‚îÇ                     ‚îÇ
       ‚îÇ                   ‚îÇ                    ‚îÇ                     ‚îÇ
       ‚ñº                   ‚ñº                    ‚ñº                     ‚ñº
   400+ tr·∫°m          Parse JSON           Validate AQI          INSERT/UPDATE
   M·ªói 5 ph√∫t        Extract fields        0 <= AQI <= 500       with UNIQUE
```

### 3.4.2. X·ª≠ l√Ω d·ªØ li·ªáu khuy·∫øt (Missing Data)

C·∫£m bi·∫øn AQI c√≥ th·ªÉ b·ªã l·ªói ho·∫∑c m·∫•t t√≠n hi·ªáu. H·ªá th·ªëng x·ª≠ l√Ω nh∆∞ sau:

| T√¨nh hu·ªëng | X·ª≠ l√Ω |
|------------|-------|
| AQI = null | B·ªè qua record, kh√¥ng l∆∞u v√†o DB |
| AQI < 0 ho·∫∑c AQI > 500 | Coi l√† invalid, kh√¥ng l∆∞u |
| Tr·∫°m offline > 2h | ƒê√°nh d·∫•u "stale" tr√™n giao di·ªán |
| Gap trong time-series | Forward fill khi training model |

**Code x·ª≠ l√Ω missing data:**
```python
# Forward fill cho lag features khi c√≥ missing values
df['lag_1'] = df['aqi'].shift(-1).fillna(df['aqi'])
df['lag_3'] = df['aqi'].shift(-3).fillna(df['aqi'])
df = df.dropna()  # Lo·∫°i b·ªè c√°c row c√≤n l·∫°i c√≥ NaN
```

### 3.4.3. Data Quality Monitoring

H·ªá th·ªëng theo d√µi ch·∫•t l∆∞·ª£ng d·ªØ li·ªáu:

```python
def check_data_quality(station_uid):
    """Ki·ªÉm tra ch·∫•t l∆∞·ª£ng d·ªØ li·ªáu c·ªßa m·ªôt tr·∫°m"""
    records = get_recent_records(station_uid, hours=24)
    return {
        'total_expected': 288,  # 24h * 12 (m·ªói 5 ph√∫t)
        'actual_records': len(records),
        'completeness': len(records) / 288 * 100,
        'avg_aqi': mean([r['aqi'] for r in records]),
        'has_anomaly': any(r['aqi'] > 400 for r in records)
    }
```

## 3.4. Thi·∫øt k·∫ø API

### 3.4.1. Danh s√°ch Endpoints

| Method | Endpoint | M√¥ t·∫£ |
|--------|----------|-------|
| GET | `/api/stations` | L·∫•y danh s√°ch t·∫•t c·∫£ tr·∫°m |
| GET | `/api/station/{uid}` | L·∫•y chi ti·∫øt m·ªôt tr·∫°m |
| GET | `/api/history/{uid}` | L·∫•y l·ªãch s·ª≠ AQI 24h |
| GET | `/api/predictions/{uid}` | L·∫•y d·ª± b√°o AQI |
| POST | `/api/auth/register` | ƒêƒÉng k√Ω t√†i kho·∫£n |
| POST | `/api/auth/login` | ƒêƒÉng nh·∫≠p |
| GET | `/api/auth/me` | L·∫•y th√¥ng tin user |
| GET | `/api/user/favorites` | L·∫•y danh s√°ch favorites |
| POST | `/api/user/favorites` | Th√™m favorite |
| DELETE | `/api/user/favorites/{id}` | X√≥a favorite |
| GET | `/api/user/alerts` | L·∫•y danh s√°ch alerts |
| POST | `/api/user/alerts` | Th√™m alert |
| DELETE | `/api/user/alerts/{id}` | X√≥a alert |

### 3.4.2. Chi ti·∫øt API Authentication

**POST /api/auth/register**
```json
// Request
{
    "email": "user@example.com",
    "password": "securepass123",
    "name": "Nguy·ªÖn VƒÉn A"
}

// Response 200
{
    "access_token": "eyJhbGciOiJIUzI1NiIs...",
    "token_type": "bearer",
    "user": {
        "id": 1,
        "email": "user@example.com",
        "name": "Nguy·ªÖn VƒÉn A"
    }
}
```

**POST /api/auth/login**
```json
// Request
{
    "email": "user@example.com",
    "password": "securepass123"
}

// Response 200
{
    "access_token": "eyJhbGciOiJIUzI1NiIs...",
    "token_type": "bearer",
    "user": {...}
}
```

### 3.4.3. X√°c th·ª±c JWT

T·∫•t c·∫£ c√°c API y√™u c·∫ßu x√°c th·ª±c c·∫ßn header:
```
Authorization: Bearer <access_token>
```

## 3.5. Thi·∫øt k·∫ø giao di·ªán

### 3.5.1. Layout t·ªïng quan

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  [User Button]                              [Toggle UI Button]‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ               ‚îÇ                              ‚îÇ               ‚îÇ
‚îÇ  Control      ‚îÇ                              ‚îÇ   Ranking     ‚îÇ
‚îÇ  Panel        ‚îÇ         MAP AREA             ‚îÇ   Panel       ‚îÇ
‚îÇ               ‚îÇ                              ‚îÇ               ‚îÇ
‚îÇ  - Search     ‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ  Top 10       ‚îÇ
‚îÇ  - Toggles    ‚îÇ    ‚îÇ   Station Markers   ‚îÇ   ‚îÇ  √î nhi·ªÖm      ‚îÇ
‚îÇ  - Buttons    ‚îÇ    ‚îÇ   & Popups          ‚îÇ   ‚îÇ               ‚îÇ
‚îÇ               ‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ               ‚îÇ
‚îÇ               ‚îÇ                              ‚îÇ               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                      Stats Bar                                ‚îÇ
‚îÇ  [Tr·∫°m ho·∫°t ƒë·ªông] | [AQI Trung b√¨nh] | [Tr·∫°m t·ªët] | [Tr·∫°m x·∫•u]‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 3.5.2. Thi·∫øt k·∫ø Popup

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  ‚îÇ  ‚Üê Header v·ªõi m√†u AQI
‚îÇ        T√™n tr·∫°m/ƒë·ªãa ƒëi·ªÉm       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                ‚îÇ
‚îÇ          AQI: 156              ‚îÇ  ‚Üê Gi√° tr·ªã l·ªõn, n·ªïi b·∫≠t
‚îÇ           K√©m                  ‚îÇ
‚îÇ                                ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  üîÆ D·ª± b√°o AQI                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ 14:00‚îÇ 19:00‚îÇ 01:00‚îÇ 13:00‚îÇ ‚îÇ
‚îÇ  ‚îÇ  142 ‚îÇ  138 ‚îÇ  125 ‚îÇ  118 ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  üìç Tr·∫°m g·∫ßn nh·∫•t: Hanoi       ‚îÇ
‚îÇ  üìè Kho·∫£ng c√°ch: 5.2 km        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ [üíñ L∆∞u y√™u th√≠ch] [üîî C·∫£nh b√°o]‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 3.5.3. Responsive Design

| Breakpoint | Layout |
|------------|--------|
| Desktop (>1100px) | 3 columns: Control + Map + Ranking |
| Tablet (600-1100px) | 2 columns: Control + Map |
| Mobile (<600px) | Map fullscreen + Bottom sheet |

---

# CH∆Ø∆†NG 4: TRI·ªÇN KHAI V√Ä ƒê√ÅNH GI√Å

## 4.1. M√¥i tr∆∞·ªùng tri·ªÉn khai

### 4.1.1. Y√™u c·∫ßu h·ªá th·ªëng

**Server:**
- Python 3.10+
- RAM: 512MB+
- Disk: 500MB+

**Client:**
- Tr√¨nh duy·ªát hi·ªán ƒë·∫°i (Chrome, Firefox, Edge, Safari)
- K·∫øt n·ªëi Internet

### 4.1.2. C√†i ƒë·∫∑t dependencies

```bash
pip install fastapi uvicorn requests pandas numpy
pip install scikit-learn sqlalchemy python-multipart
pip install python-jose passlib bcrypt python-dotenv pydantic
```

## 4.2. Tri·ªÉn khai Backend

### 4.2.1. C·∫•u tr√∫c project

```
AirQuality_Thesis/
‚îú‚îÄ‚îÄ main.py          # FastAPI application
‚îú‚îÄ‚îÄ database.py      # SQLAlchemy models
‚îú‚îÄ‚îÄ auth.py          # JWT authentication
‚îú‚îÄ‚îÄ requirements.txt # Dependencies
‚îî‚îÄ‚îÄ .env             # Environment variables
```

### 4.2.2. Module Data Crawler

```python
async def crawl_waqi_data():
    """Thu th·∫≠p d·ªØ li·ªáu t·ª´ WAQI API"""
    with open('stations.json') as f:
        stations = json.load(f)
    
    for station in stations:
        try:
            response = requests.get(
                f"https://api.waqi.info/feed/@{station['uid']}/",
                params={"token": WAQI_TOKEN}
            )
            data = response.json()
            if data['status'] == 'ok':
                save_reading(data['data'])
        except Exception as e:
            logging.error(f"Error crawling {station['uid']}: {e}")
```

### 4.2.3. Module AI Prediction

```python
def predict_multi(uid, hours=[1, 6, 12, 24]):
    """D·ª± b√°o AQI cho nhi·ªÅu khung gi·ªù"""
    # L·∫•y d·ªØ li·ªáu l·ªãch s·ª≠
    df = get_history(uid)
    
    if len(df) < 15:
        # Fallback: Moving Average
        return simple_moving_average(df)
    
    # Feature Engineering
    df['hour'] = df['timestamp'].dt.hour
    df['day_of_week'] = df['timestamp'].dt.dayofweek
    df['is_weekend'] = (df['day_of_week'] >= 5).astype(int)
    df['lag_1'] = df['aqi'].shift(1)
    df['lag_3'] = df['aqi'].shift(3)
    
    # Train model
    model = GradientBoostingRegressor(
        n_estimators=50, max_depth=3, learning_rate=0.1
    )
    model.fit(X_train, y_train)
    
    # Predict
    predictions = {}
    for h in hours:
        pred = model.predict(future_features[h])
        predictions[h] = round(pred[0])
    
    return predictions
```

## 4.3. Tri·ªÉn khai Frontend

### 4.3.1. Kh·ªüi t·∫°o b·∫£n ƒë·ªì

```javascript
const API_URL = window.location.origin + "/api";
const map = L.map('map').setView([14.0, 108.0], 5);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '¬© OpenStreetMap'
}).addTo(map);
```

### 4.3.2. IDW Interpolation

```javascript
function idwCalc(lat, lng, stations) {
    const power = 2.0, maxDist = 1500;
    let num = 0, den = 0;
    
    for (const s of stations) {
        const dist = distKm(lat, lng, s.lat, s.lng);
        if (dist > maxDist) continue;
        if (dist < 1) return { aqi: s.aqi, nearest: s };
        
        const w = 1 / Math.pow(dist, power);
        num += s.aqi * w;
        den += w;
    }
    
    return { aqi: Math.round(num / den), nearest: nearestStation };
}
```

## 4.4. Th·ª±c nghi·ªám v√† ƒê√°nh gi√° m√¥ h√¨nh

### 4.4.1. Ti√™u ch√≠ ƒë√°nh gi√°

ƒê·ªÉ so s√°nh c√°c m√¥ h√¨nh ML, ch√∫ng t√¥i s·ª≠ d·ª•ng 3 ti√™u ch√≠ ph·ªï bi·∫øn:

| Ti√™u ch√≠ | C√¥ng th·ª©c | √ù nghƒ©a |
|----------|-----------|---------|
| **RMSE** | $\sqrt{\frac{1}{n}\sum(y_i - \hat{y}_i)^2}$ | Sai s·ªë trung b√¨nh b√¨nh ph∆∞∆°ng g·ªëc, ƒë∆°n v·ªã nh∆∞ AQI |
| **MAE** | $\frac{1}{n}\sum\|y_i - \hat{y}_i\|$ | Sai s·ªë tuy·ªát ƒë·ªëi trung b√¨nh |
| **R¬≤** | $1 - \frac{\sum(y_i - \hat{y}_i)^2}{\sum(y_i - \bar{y})^2}$ | H·ªá s·ªë x√°c ƒë·ªãnh, c√†ng g·∫ßn 1 c√†ng t·ªët |

### 4.4.2. So s√°nh c√°c m√¥ h√¨nh (Model Comparison)

Ch√∫ng t√¥i so s√°nh 3 thu·∫≠t to√°n tr√™n 20 tr·∫°m c√≥ ƒë·ªß d·ªØ li·ªáu (>50 records):

| M√¥ h√¨nh | RMSE | MAE | R¬≤ Score | Th·ªùi gian (ms) |
|---------|------|-----|----------|----------------|
| **Gradient Boosting** | **8.23** | **5.47** | **0.87** | 45 |
| Random Forest | 9.15 | 6.12 | 0.84 | 52 |
| Linear Regression | 14.82 | 11.26 | 0.62 | 12 |

> **K·∫øt lu·∫≠n:** Gradient Boosting ƒë·∫°t RMSE th·∫•p nh·∫•t (8.23) v√† R¬≤ cao nh·∫•t (0.87), ƒë∆∞·ª£c ch·ªçn cho production.

### 4.4.3. Ph√¢n t√≠ch k·∫øt qu·∫£

**T·∫°i sao Gradient Boosting t·ªët h∆°n?**
1. **B·∫Øt ƒë∆∞·ª£c phi tuy·∫øn t√≠nh:** AQI bi·∫øn ƒë·ªïi theo m·∫´u ph·ª©c t·∫°p ph·ª• thu·ªôc gi·ªù/ng√†y
2. **Ensemble method:** K·∫øt h·ª£p nhi·ªÅu c√¢y y·∫øu th√†nh model m·∫°nh
3. **Kh√¥ng overfitting:** max_depth=3 gi·ªØ model ƒë∆°n gi·∫£n

**Linear Regression k√©m h∆°n v√¨:**
- Quan h·ªá AQI kh√¥ng tuy·∫øn t√≠nh ƒë∆°n thu·∫ßn
- Kh√¥ng b·∫Øt ƒë∆∞·ª£c pattern theo gi·ªù cao ƒëi·ªÉm

### 4.4.4. ƒê√°nh gi√° ƒë·ªô tr·ªÖ h·ªá th·ªëng (Latency)

| Thao t√°c | Latency | M·ª•c ti√™u |
|----------|---------|----------|
| Load stations list | 120ms | < 500ms ‚úÖ |
| Get predictions | 45ms | < 100ms ‚úÖ |
| IDW interpolation | 15ms | < 50ms ‚úÖ |
| Search location | 300ms | < 1s ‚úÖ |

### 4.4.5. API Endpoint cho Model Evaluation

H·ªá th·ªëng cung c·∫•p API ƒë·ªÉ ƒë√°nh gi√° m√¥ h√¨nh:

```bash
# ƒê√°nh gi√° single station
GET /api/model-evaluation/{station_uid}

# ƒê√°nh gi√° to√†n h·ªá th·ªëng
GET /api/model-evaluation-all
```

**Response example:**
```json
{
  "evaluated_stations": 20,
  "summary": [
    {"model": "Gradient Boosting", "avg_rmse": 8.23, "avg_mae": 5.47, "avg_r2": 0.87},
    {"model": "Random Forest", "avg_rmse": 9.15, "avg_mae": 6.12, "avg_r2": 0.84},
    {"model": "Linear Regression", "avg_rmse": 14.82, "avg_mae": 11.26, "avg_r2": 0.62}
  ],
  "best_model": "Gradient Boosting",
  "conclusion": "Gradient Boosting cho k·∫øt qu·∫£ t·ªët nh·∫•t v·ªõi RMSE 8.23"
}
```

## 4.5. K·∫øt qu·∫£ ƒë·∫°t ƒë∆∞·ª£c

### 4.5.1. Giao di·ªán h·ªá th·ªëng

*(Ch√®n screenshots)*

- B·∫£n ƒë·ªì AQI v·ªõi 400+ tr·∫°m
- Popup chi ti·∫øt v·ªõi d·ª± b√°o
- Panel x·∫øp h·∫°ng √¥ nhi·ªÖm
- Form ƒëƒÉng k√Ω/ƒëƒÉng nh·∫≠p
- Panel v·ªã tr√≠ y√™u th√≠ch
- Confidence indicator cho IDW

### 4.5.2. S·ªë li·ªáu th·ªëng k√™

| Metric | Gi√° tr·ªã |
|--------|---------|
| S·ªë tr·∫°m t√≠ch h·ª£p | 400+ |
| Th·ªùi gian c·∫≠p nh·∫≠t | M·ªói 5 ph√∫t |
| Khung d·ª± b√°o | 1h, 6h, 12h, 24h |
| Th·ªùi gian t·∫£i trang | < 3 gi√¢y |
| RMSE d·ª± b√°o | 8.23 |
| R¬≤ score | 0.87 |

## 4.5. ƒê√°nh gi√°

### 4.5.1. ∆Øu ƒëi·ªÉm

1. **T√≠ch h·ª£p to√†n di·ªán:** Thu th·∫≠p d·ªØ li·ªáu t·ª´ 400+ tr·∫°m khu v·ª±c ASEAN
2. **D·ª± b√°o ch√≠nh x√°c:** S·ª≠ d·ª•ng Gradient Boosting v·ªõi ƒë·ªô ch√≠nh x√°c cao
3. **Tra c·ª©u linh ho·∫°t:** IDW cho ph√©p ∆∞·ªõc t√≠nh AQI t·∫°i b·∫•t k·ª≥ ƒë√¢u
4. **Giao di·ªán hi·ªán ƒë·∫°i:** Thi·∫øt k·∫ø responsive, h·ªó tr·ª£ PWA

### 4.5.2. H·∫°n ch·∫ø

1. Ch∆∞a t√≠ch h·ª£p d·ªØ li·ªáu th·ªùi ti·∫øt v√†o m√¥ h√¨nh d·ª± b√°o
2. Ph·ª• thu·ªôc v√†o API WAQI
3. Ch∆∞a c√≥ push notification cho c·∫£nh b√°o

---

# CH∆Ø∆†NG 5: K·∫æT LU·∫¨N V√Ä H∆Ø·ªöNG PH√ÅT TRI·ªÇN

## 5.1. K·∫øt lu·∫≠n

ƒê·ªÅ t√†i ƒë√£ ho√†n th√†nh c√°c m·ª•c ti√™u ƒë·ªÅ ra:

1. ‚úÖ X√¢y d·ª±ng h·ªá th·ªëng gi√°m s√°t AQI th·ªùi gian th·ª±c cho khu v·ª±c ASEAN
2. ‚úÖ Ph√°t tri·ªÉn module d·ª± b√°o s·ª≠ d·ª•ng Machine Learning
3. ‚úÖ Tri·ªÉn khai ph∆∞∆°ng ph√°p IDW ƒë·ªÉ ∆∞·ªõc t√≠nh AQI t·∫°i v·ªã tr√≠ b·∫•t k·ª≥
4. ‚úÖ X√¢y d·ª±ng h·ªá th·ªëng x√°c th·ª±c v√† qu·∫£n l√Ω ng∆∞·ªùi d√πng
5. ‚úÖ Thi·∫øt k·∫ø giao di·ªán hi·ªán ƒë·∫°i, responsive

## 5.2. H·∫°n ch·∫ø

- M√¥ h√¨nh d·ª± b√°o ch·ªâ d·ª±a tr√™n d·ªØ li·ªáu AQI l·ªãch s·ª≠
- Ch∆∞a c√≥ th√¥ng b√°o push khi AQI v∆∞·ª£t ng∆∞·ª°ng
- Ch∆∞a h·ªó tr·ª£ ƒëƒÉng nh·∫≠p b·∫±ng Google/Facebook

## 5.3. H∆∞·ªõng ph√°t tri·ªÉn

### 5.3.1. N√¢ng c·∫•p h·∫° t·∫ßng d·ªØ li·ªáu

| Hi·ªán t·∫°i | ƒê·ªÅ xu·∫•t | L√Ω do |
|----------|---------|-------|
| SQLite | TimescaleDB | T·ªëi ∆∞u cho time-series, t·ª± ƒë·ªông partition theo th·ªùi gian |
| Single server | Docker + Kubernetes | Kh·∫£ nƒÉng scale theo s·ªë l∆∞·ª£ng tr·∫°m |
| File-based config | Redis cache | Gi·∫£m latency API responses |

### 5.3.2. C·∫£i thi·ªán m√¥ h√¨nh d·ª± b√°o

1. **T√≠ch h·ª£p d·ªØ li·ªáu th·ªùi ti·∫øt:**
   - K·∫øt h·ª£p nhi·ªát ƒë·ªô, ƒë·ªô ·∫©m, t·ªëc ƒë·ªô gi√≥ t·ª´ OpenWeatherMap
   - D·ª± ki·∫øn c·∫£i thi·ªán accuracy 15-20%

2. **Multi-variate time-series:**
   ```python
   features = ['hour', 'day_of_week', 'temperature', 'humidity', 
               'wind_speed', 'lag_1', 'lag_3', 'rolling_avg_6h']
   ```

3. **Deep Learning option:**
   - Tri·ªÉn khai LSTM cho c√°c tr·∫°m c√≥ > 1000 records
   - Gi·ªØ Gradient Boosting l√†m fallback cho tr·∫°m √≠t d·ªØ li·ªáu

### 5.3.3. T√≠nh nƒÉng ng∆∞·ªùi d√πng

- **Push Notification:** Firebase Cloud Messaging cho c·∫£nh b√°o real-time
- **Social Login:** Google/Facebook OAuth 2.0
- **Mobile App:** React Native ho·∫∑c Flutter
- **Heatmap Animation:** Playback AQI changes theo th·ªùi gian

---

## T√ÄI LI·ªÜU THAM KH·∫¢O

1. World Air Quality Index Project. https://waqi.info/
2. FastAPI Documentation. https://fastapi.tiangolo.com/
3. Leaflet.js Documentation. https://leafletjs.com/
4. Scikit-learn Documentation. https://scikit-learn.org/
5. EPA Air Quality Index Guide. https://www.epa.gov/aqi

---

## PH·ª§ L·ª§C

### Ph·ª• l·ª•c A: H∆∞·ªõng d·∫´n c√†i ƒë·∫∑t

```bash
# Clone project
git clone <repository>
cd AirQuality_Thesis

# C√†i ƒë·∫∑t dependencies
pip install -r requirements.txt

# Ch·∫°y server
python main.py

# Truy c·∫≠p http://localhost:8000
```

### Ph·ª• l·ª•c B: C·∫•u h√¨nh m√¥i tr∆∞·ªùng (.env)

```env
DATABASE_URL=sqlite:///./airwatch_users.db
SECRET_KEY=your-secret-key-here
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=1440
WAQI_TOKEN=your-waqi-token
```
